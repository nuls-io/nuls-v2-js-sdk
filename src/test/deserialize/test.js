const Serializers = require("../../api/serializers");
const Block = require("../../model/block")
const BufferReader = require("../../utils/bufferreader")

//共识奖励+转账,1453110
const blockhex = "4ab91a7d320b0b07b29536ec58c076ea7d3169d2c8592662f179f358c70036144ba5e7c1af3c19aa1b3c09ec8190b8b28d8baf789382a378f1f3109642e103622a0b585e362c1600020000005c5c3f00006f00580a585e150004000400500a00208632672517e468d1acdc6e59dd3e757138b8dbc908afb7f7c3daba90759d40c06c608a936d45b943dd821c393be73a53ce88585ccf18f93e8e1924dbd6f1ec9e30b0acafec2d78d32102f28feeaa3cd5b3d0ccde3389debbbc1268db317703750f756eaead92b3c23af546304402201339330f5adaab7163fa284456f07361cf2c29e8de2b5ee4bd9b360f1c6c577a02204aba70760fc5e4de2460bb6bdb1017f5a5e1116571c6cfbae17889760f51c90a01002a0b585e00008a000217010001474a63f8b2f0a999741c4fd162d430e17733f33b01000100a9e8810b00000000000000000000000000000000000000000000000000000000000000000000000017010001940c5646e9b680142d4452ec91ea7a0eeebe05d7010001007f580a00000000000000000000000000000000000000000000000000000000000000000000000000000200230b585e1262696e616e6365207769746864726177616c008c01170100013ba3e3c56062266262514c74fafb01852af99fec01000100e0b562910200000000000000000000000000000000000000000000000000000008dc1890d6baa257ad000117010001a9fa55a587f415bde2cc50469af2ee873322d5fa01000100402f61910200000000000000000000000000000000000000000000000000000000000000000000006921037af860c03801a7453c55fd2a7fe90c5081ac66db79b7a92139f320d4d60fc0bb463044022020731fb06b6452ae6ce67efe5334159f9008fcaa037e717f040774f7e8b4b75502205432dda224c6104aebde56875eec5ba1646eaaeae63f7482dce579c3ec13d79b";


let reader = new BufferReader(Buffer.from(blockhex, "hex"), 0);

let block = new Block(reader);

block.printInfo();


console.log('---------------------------------------------------------------------')
console.log('Cursor::::' + reader.getCursor())
console.log('Total::::' + reader.getBuffer().length)


let bw = new Serializers();
bw.getBufWriter().writeVarintNum(65536)
var val = bw.getBufWriter().toBuffer().toString("hex")
console.log(val)
console.log(bw.getBufWriter().toBuffer())